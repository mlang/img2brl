cmake_minimum_required(VERSION 2.8)
project(img2brl CXX)
find_package(PkgConfig REQUIRED)
pkg_search_module(CGICC REQUIRED cgicc)
pkg_search_module(CURL REQUIRED libcurl)
pkg_search_module(MAGICKPP REQUIRED Magick++)
include_directories(${CGICC_INCLUDE_DIRS})
include_directories(${CURL_INCLUDE_DIRS})
include_directories(${MAGICKPP_INCLUDE_DIRS})
add_definitions(-std=c++11)
add_executable(img2brl.cgi img2brl.cc)
target_link_libraries(img2brl.cgi ${CGICC_LIBRARIES} ${CURL_LIBRARIES} ${MAGICKPP_LIBRARIES})
install(TARGETS img2brl.cgi DESTINATION img2brl)
install(FILES favicon.png DESTINATION img2brl)
install(PROGRAMS git-post-update-hook DESTINATION img2brl/hooks RENAME post-update)
